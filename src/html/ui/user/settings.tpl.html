<div class="nav-title">User Settings</div>

<div class="main-content">
  <div class="all-sections">

    <div class="section-label" ng-click="expand1 = !expand1">
        Account
        <i ng-class="{'icon-down': expand1, 'icon-right': !expand1}"></i>
    </div>
    <div class="section email" collapse="!expand1">
    	<div class="setting-item">
      	<div class="main-column" ng-hide="editing.email">
      		<label>Your Email</label>
      		<p>{{user.email}}</p>
    		</div>
      	<div class="side-column" ng-hide="editing.email">
          <button type="button" ng-click="edit('email')">Change</button>
        </div>
        <div class="full-column" ng-show="editing.email">
          <label>Your Email</label>
          <input type="text" ng-model="edited.email" class="form-control"/>
          <div class="buttons">
            <p ng-show="needsRevalidation()" class="help">
              You will have to re-validate your email address after changing it.
            </p>
            <button type="button" ng-click="cancelEdit('email')">Cancel</button>
            <button type="button" class="main-action" ng-click="saveEdit('email')">Save</button>
          </div>
        </div>
    	</div>
    	<div class="setting-item">
      	<div class="main-column"><label>Your Password</label></div>
      	<div class="side-column">
          <a class="change-password" href="/accounts/password/change" target="_self">Change</a>
        </div>
    	</div>
    	<div class="setting-item">
      	<div class="main-column">
          <label>Receive email notifications?</label>
          <div class="summary">Check the circle to get updates on seeds you have created or joined.</div>
        </div>
      	<div class="side-column">
          <input type="checkbox" ng-model="user.send_email_preference" ng-click="toggle('send_email_preference')"/>
        </div>
    	</div>
      <div class="setting-item">
        <div class="main-column">
          <label>Get daily email digests?</label>
          <div class="summary">Check the circle to get daily digests of new activity in your communities.</div>
        </div>
        <div class="side-column">
          <input type="checkbox" ng-model="user.daily_digest" ng-click="toggle('daily_digest')"/>
        </div>
      </div>
    </div>

    <div class="section-label" ng-click="expand2 = !expand2">
        Communities
        <i ng-class="{'icon-down': expand2, 'icon-right': !expand2}"></i>
    </div>
    <div class="section communities" collapse="!expand2">
      <div class="setting-item" ng-repeat="membership in user.memberships track by $index">
        <div class="main-column">
          <label><a ui-sref="community.seeds({community: membership.community.slug})">{{membership.community.name}}</a></label>
          <div class="summary">Joined: {{membership.date_joined | date:'longDate'}}</div>
        </div>
        <div class="side-column"><a ng-click="leaveCommunity(membership.community_id, $index)">Leave</a></div>
      </div>
    </div>

    <div class="section-label" ng-click="expand3 = !expand3">
        Payment Details
        <i ng-class="{'icon-down': expand3, 'icon-right': !expand3}"></i>
    </div>
    <div class="section" collapse="!expand3">
      <div class="setting-item">
        <div class="full-column">
          <p>You do not belong to any communities that require a membership fee.</p>
        </div>
      </div>
    </div>

  </div>
</div>
