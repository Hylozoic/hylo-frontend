<div id="nav-pad"></div>
<div id="nav" ng-class="{public: !currentUser}" ng-controller="NavCtrl">

  <div class="item public-only hylo-icon">
    <a href="/" target="_self"><i class="icon-hylo-script"></i></a>
  </div>

  <div class="item public-only text-link">
    <a href="/about" target="_self">About</a>
  </div>

  <div class="item home">
    <a class="button" ui-sref="home.allPosts" tooltip="Home" tooltip-placement="bottom" ng-show="currentUser.inCommunity()" touch-class="active">
      <i class="icon-home"></i>
    </a>
    <a class="button" ui-sref="home.simple" tooltip="Home" tooltip-placement="bottom" ng-hide="currentUser.inCommunity()" touch-class="active">
      <i class="icon-home"></i>
    </a>
  </div>

  <div dropdown class="item communities">
    <a class="button" dropdown-toggle tooltip="Communities" tooltip-placement="bottom" back-img="" touch-class="active">
      <%- include('../../img/projects/community.svg') %>
    </a>
    <ul class="dropdown-menu" role="menu">
      <li ng-repeat="membership in currentUser.memberships|orderBy:'community.name'">
        <a ui-sref="community.posts({community: membership.community.slug})">
          <div class="avatar" back-img="membership.community.avatar_url"></div>
          {{membership.community.name}}
        </a>
      </li>
      <li role="presentation" class="divider"></li>
      <li class="bottom">
        <a ng-click="joinCommunity()">Join a community</a>
        <a ui-sref="createCommunity">Create a new community</a>
        <a ui-sref="discover.communities">Discover communities</a>
      </li>
      </li>
    </ul>
  </div>

  <div class="item search">
    <a class="button" ui-sref="search" tooltip="Search" tooltip-placement="bottom" touch-class="active">
      <i class="icon-search"></i>
    </a>
  </div>

  <div class="right">

    <div class="item notifications">
      <a class="button" ui-sref="notifications" tooltip="Activity" tooltip-placement="bottom" touch-class="active">
        <div class="badge" ng-if="currentUser.new_notification_count > 0">{{currentUser.new_notification_count}}</div>
        <i class="icon-notifications"></i>
      </a>
    </div>
    <div dropdown class="item profile">
      <a class="button avatar" dropdown-toggle back-img="currentUser.avatar_url" tooltip="Your Account" tooltip-placement="bottom" touch-class="active">
      </a>
      <ul class="dropdown-menu" role="menu">
        <li><a ui-sref="profile.posts({id: currentUser.id})">Profile</a></li>
        <li><a ui-sref="userSettings">Settings</a></li>
        <li><a href="/noo/logout" target="_self" class="logout">Log out</a></li>
        <li role="presentation" class="divider"></li>
        <li><a ui-sref="support">Help</a></li>
      </ul>
    </div>

    <div class="item public-only text-link">
      <a ui-sref="login">Log in</a>
    </div>

    <div class="item public-only text-link">
      <a ui-sref="signup">Sign up</a>
    </div>
  </div>

</div>
